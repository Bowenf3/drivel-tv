(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{114:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a(1),s=a.n(n),r=a(55),o=a.n(r),i=(a(66),a(13)),b=a.n(i),j=a(19),l=a(5),u=a(27),d=a(2);a(68),a(15);var O=function(){return Object(c.jsx)("div",{className:"navbar",children:"Drivel.TV"})};var p=function(){return Object(c.jsx)("div",{className:"homepage",children:"Homepage"})},h=a(36),x=a.n(h);var f=function(e){var t=Object(n.useState)(""),a=Object(l.a)(t,2),s=a[0],r=a[1];return Object(n.useEffect)((function(){x()("#chatList").append(x()("<li>").text(e.msg))}),[e.msg]),Object(c.jsxs)("div",{className:"chat",children:[Object(c.jsx)("ul",{id:"chatList"}),Object(c.jsxs)("form",{id:"chatForm",action:"",onSubmit:function(t){t.preventDefault(),""!==s&&(e.emitMsg(s),r(""))},children:[Object(c.jsx)("input",{id:"chatInput",autocomplete:"off",value:s,onChange:function(e){return r(e.target.value)}}),Object(c.jsx)("button",{id:"chatButton",children:"Send"})]})]})},v=a(56);var m,g=function(e){var t=Object(n.useState)({}),a=Object(l.a)(t,2),s=a[0],r=a[1];Object(n.useEffect)((function(){r(e.broadcast)}),[e.broadcast]);var o={height:"100%",width:"100%",playerVars:{enablejsapi:1,playsinline:1,"webkit-playsinline":1,autoplay:1,start:s.currentTime}};return Object(c.jsx)(v.a,{containerClassName:"videoplayer",onStateChange:function(e){0===e.data&&window.location.reload()},videoId:s.currentVideo,opts:o})},y=a(59),w=a.n(y);var C=function(e){var t=Object(n.useState)(""),a=Object(l.a)(t,2),s=a[0],r=a[1],o=Object(n.useState)({}),i=Object(l.a)(o,2),b=i[0],j=i[1];return Object(n.useEffect)((function(){return(m=w.a.connect()).emit("join",window.location.pathname),e.getBroadcast(window.location.pathname.slice(3)),m.on("chat message to client",(function(e){r(e)})),function(){m.close()}}),[]),Object(n.useEffect)((function(){j(e.broadcast)}),[e.broadcast]),Object(c.jsxs)("div",{className:"broadcast",children:[Object(c.jsx)(g,{broadcast:b}),Object(c.jsx)(f,{emitMsg:function(e){m.emit("chat message to server",{room:window.location.pathname,msg:e})},msg:s})]})},S=a(20),k=a(14);var T=function(){var e=Object(d.f)(),t=Object(n.useState)({title:"",description:"",tags:"",owner:"",isReversed:!1,youtubePlaylists:""}),a=Object(l.a)(t,2),s=a[0],r=a[1];function o(e){var t=e.target.value;r(Object(k.a)(Object(k.a)({},s),{},Object(S.a)({},e.target.name,t)))}function i(){return(i=Object(j.a)(b.a.mark((function t(a){var c,n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/api/create-broadcast",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)});case 3:if(!(c=t.sent).ok){t.next=11;break}return t.next=7,c.json();case 7:n=t.sent,e.push("/b/".concat(n.broadcastId)),t.next=12;break;case 11:e.push("/404");case 12:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,15]])})))).apply(this,arguments)}return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{className:"broadcastFormContainer",children:[Object(c.jsx)("h3",{children:"Create a new broadcast"}),Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==s.title?""!==s.owner?""!==s.youtubePlaylists?(!function(e){i.apply(this,arguments)}(s),r({title:"",description:"",tags:"",owner:"",youtubePlaylists:"",isReversed:!1})):alert("You have not specefied any youtube playlists!"):alert("Owner field required!"):alert("Title required!")},children:[Object(c.jsxs)("label",{children:["Broadcast name:",Object(c.jsx)("br",{}),Object(c.jsx)("input",{name:"title",value:s.title,onChange:o,type:"text"})]}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsxs)("label",{children:["Description:",Object(c.jsx)("br",{}),Object(c.jsx)("input",{name:"description",value:s.description,onChange:o,type:"text"})]}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsxs)("label",{children:["Tags:",Object(c.jsx)("br",{}),Object(c.jsx)("input",{name:"tags",value:s.tags,onChange:o,type:"text"})]}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsxs)("label",{children:["Owner:",Object(c.jsx)("br",{}),Object(c.jsx)("input",{name:"owner",value:s.owner,onChange:o,type:"text"})]}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsxs)("label",{children:["Playlists:",Object(c.jsx)("br",{}),Object(c.jsx)("input",{name:"youtubePlaylists",value:s.youtubePlaylists,onChange:o,type:"text"})]}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsxs)("label",{children:["Want to reverse the queue order of the playlists?\xa0\xa0\xa0",Object(c.jsx)("input",{name:"isReversed",value:s.isReversed,onChange:function(e){var t;t="false"===e.target.value,r(Object(k.a)(Object(k.a)({},s),{},{isReversed:t}))},type:"checkbox"})]}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsx)("button",{type:"submit",value:"Create",children:"Create Broadcast"})]})]})})};var B=function(){return Object(c.jsx)("h4",{style:{marginTop:"6vh"},children:"404 - Page or Broadcast not found on server"})};var I=function(){var e=Object(d.f)(),t=Object(n.useState)({broadcastId:""}),a=Object(l.a)(t,2),s=a[0],r=a[1];function o(){return(o=Object(j.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/api/delete-broadcast",{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)});case 3:t.sent.ok?console.log("Broadcast deleted!"):e.push("/404"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{className:"broadcastFormContainer",children:[Object(c.jsx)("h3",{children:"Delete broadcast"}),Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==s.broadcastId?(!function(e){o.apply(this,arguments)}(s),r({broadcastId:""})):alert("Broadcast id required!")},children:[Object(c.jsxs)("label",{children:["Broadcast id:",Object(c.jsx)("br",{}),Object(c.jsx)("input",{name:"broadcastId",value:s.broadcastId,onChange:function(e){var t=e.target.value;r(Object(k.a)(Object(k.a)({},s),{},Object(S.a)({},e.target.name,t)))},type:"text"})]}),Object(c.jsx)("button",{type:"submit",value:"Delete",children:"Delete Broadcast"})]})]})})};var P=function(){var e=Object(n.useState)({}),t=Object(l.a)(e,2),a=t[0],s=t[1],r=Object(n.useState)("/b/:broadcast"),o=Object(l.a)(r,2),i=o[0],h=o[1];return Object(c.jsxs)(u.a,{children:[Object(c.jsx)(O,{}),Object(c.jsxs)(d.c,{children:[Object(c.jsxs)(d.a,{exact:!0,path:"/",children:[" ",Object(c.jsx)(p,{})]}),Object(c.jsx)(d.a,{exact:!0,path:"/create-broadcast",children:Object(c.jsx)(T,{})}),Object(c.jsx)(d.a,{exact:!0,path:"/delete-broadcast",children:Object(c.jsx)(I,{})}),Object(c.jsxs)(d.a,{exact:!0,path:i,children:[" ",Object(c.jsx)(C,{broadcast:a,getBroadcast:function(e){return x.apply(this,arguments)}})]}),Object(c.jsxs)(d.a,{exact:!0,path:"/404",children:[" ",Object(c.jsx)(B,{})]}),Object(c.jsxs)(d.a,{path:"/",children:[" ",Object(c.jsx)(B,{})]})]})]});function x(){return(x=Object(j.a)(b.a.mark((function e(t){var a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/get-broadcast",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({broadcastId:t})});case 3:if(!(a=e.sent).ok){e.next=11;break}return e.next=7,a.json();case 7:c=e.sent,s(c),e.next=12;break;case 11:h("/");case 12:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}},D=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,115)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),s(e),r(e)}))};o.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(P,{})}),document.getElementById("root")),D()},15:function(e,t,a){},66:function(e,t,a){},68:function(e,t,a){}},[[114,1,2]]]);
//# sourceMappingURL=main.fb3c8d08.chunk.js.map